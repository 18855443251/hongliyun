(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ffe55ad2"],{"0ccb":function(e,t,n){var r=n("e330"),a=n("50c4"),o=n("577e"),c=n("1148"),s=n("1d80"),i=r(c),u=r("".slice),l=Math.ceil,p=function(e){return function(t,n,r){var c,p,f=o(s(t)),d=a(n),m=f.length,b=void 0===r?" ":o(r);return d<=m||""==b?f:(c=d-m,p=i(b,l(c/b.length)),p.length>c&&(p=u(p,0,c)),e?f+p:p+f)}};e.exports={start:p(!1),end:p(!0)}},"0e8f":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return s})),n.d(t,"f",(function(){return i})),n.d(t,"b",(function(){return u}));var r=n("b775");function a(){return Object(r["a"])({url:"/company/department"})}function o(){return Object(r["a"])({url:"/sys/user/simple"})}function c(e){return Object(r["a"])({method:"post",url:"/company/department",data:e})}function s(e){return Object(r["a"])({url:"/company/department/".concat(e)})}function i(e){return Object(r["a"])({method:"put",url:"/company/department/".concat(e.id),data:e})}function u(e){return Object(r["a"])({method:"delete",url:"/company/department/".concat(e)})}},1148:function(e,t,n){"use strict";var r=n("5926"),a=n("577e"),o=n("1d80"),c=RangeError;e.exports=function(e){var t=a(o(this)),n="",s=r(e);if(s<0||s==1/0)throw c("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(t+=t))1&s&&(n+=t);return n}},"21a6":function(e,t,n){(function(n){var r,a,o;(function(n,c){a=[],r=c,o="function"===typeof r?r.apply(t,a):r,void 0===o||(e.exports=o)})(0,(function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function r(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){i(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function a(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var c="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,s=c.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),i=c.saveAs||("object"!=typeof window||window!==c?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(e,t,n){var s=c.URL||c.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener","string"==typeof e?(i.href=e,i.origin===location.origin?o(i):a(i.href)?r(e,t,n):o(i,i.target="_blank")):(i.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(i.href)}),4e4),setTimeout((function(){o(i)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,c){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,c),n);else if(a(e))r(e,n,c);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout((function(){o(s)}))}}:function(e,t,n,a){if(a=a||open("","_blank"),a&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return r(e,t,n);var o="application/octet-stream"===e.type,i=/constructor/i.test(c.HTMLElement)||c.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||o&&i||s)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var e=l.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},l.readAsDataURL(e)}else{var p=c.URL||c.webkitURL,f=p.createObjectURL(e);a?a.location=f:location.href=f,a=null,setTimeout((function(){p.revokeObjectURL(f)}),4e4)}});c.saveAs=i.saveAs=i,e.exports=i}))}).call(this,n("c8ba"))},2749:function(e,t,n){},"2fcb":function(e,t,n){"use strict";n("2749")},"4d90":function(e,t,n){"use strict";var r=n("23e7"),a=n("0ccb").start,o=n("9a0c");r({target:"String",proto:!0,forced:o},{padStart:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},5303:function(e,t,n){"use strict";n.r(t);n("14d9");var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"app-container"},[t("div",{staticClass:"left"},[t("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"text","prefix-icon":"el-icon-search",size:"small",placeholder:"输入员工姓名全员搜索"},on:{input:e.changeValue},model:{value:e.queryParams.keyword,callback:function(t){e.$set(e.queryParams,"keyword",t)},expression:"queryParams.keyword"}}),t("el-tree",{ref:"deptTree",attrs:{"node-key":"id",data:e.depts,props:e.defaultProps,"default-expand-all":"","expand-on-click-node":!1,"highlight-current":""},on:{"current-change":e.selectNode}})],1),t("div",{staticClass:"right"},[t("el-row",{staticClass:"opeate-tools",attrs:{type:"flex",justify:"end"}},[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.$router.push("/employee/detail")}}},[e._v("添加员工")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){e.showExcelDialog=!0}}},[e._v("excel导入")]),t("el-button",{attrs:{size:"mini"},on:{click:e.exportEmployee}},[e._v("excel导出")])],1),t("el-table",{attrs:{data:e.list}},[t("el-table-column",{attrs:{prop:"staffPhoto",align:"center",label:"头像"},scopedSlots:e._u([{key:"default",fn:function(n){var r=n.row;return[r.staffPhoto?t("el-avatar",{attrs:{src:r.staffPhoto,size:30}}):t("span",{staticClass:"username"},[e._v(e._s(r.username.charAt(0)))])]}}])}),t("el-table-column",{attrs:{prop:"username",label:"姓名"}}),t("el-table-column",{attrs:{prop:"mobile",label:"手机号",sortable:""}}),t("el-table-column",{attrs:{prop:"workNumber",label:"工号",sortable:""}}),t("el-table-column",{attrs:{prop:"formOfEmployment",label:"聘用形式"},scopedSlots:e._u([{key:"default",fn:function(n){var r=n.row;return[1===r.formOfEmployment?t("span",[e._v("正式")]):2===r.formOfEmployment?t("span",[e._v("非正式")]):t("span",[e._v("无")])]}}])}),t("el-table-column",{attrs:{prop:"departmentName",label:"部门"}}),t("el-table-column",{attrs:{prop:"timeOfEntry",label:"入职时间",sortable:""}}),t("el-table-column",{attrs:{label:"操作",width:"280px"},scopedSlots:e._u([{key:"default",fn:function(n){var r=n.row;return[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.$router.push("/employee/detail/".concat(r.id))}}},[e._v("查看")]),t("el-button",{attrs:{size:"mini",type:"text"}},[e._v("角色")]),t("el-popconfirm",{attrs:{title:"确认删除该行数据吗？"},on:{onConfirm:function(t){return e.confirmDel(r.id)}}},[t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",size:"mini",type:"text"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),t("el-row",{staticStyle:{height:"60px"},attrs:{align:"middle",type:"flex",justify:"end"}},[t("el-pagination",{attrs:{layout:"total,prev, pager, next",total:e.total,"current-page":e.queryParams.page,"page-size":e.queryParams.pagesize},on:{"current-change":e.changePage}})],1)],1)]),t("import-excel",{attrs:{"show-excel-dialog":e.showExcelDialog},on:{"update:showExcelDialog":function(t){e.showExcelDialog=t},"update:show-excel-dialog":function(t){e.showExcelDialog=t},uploadSuccess:e.getEmployeeList}})],1)},a=[],o=n("c7eb"),c=n("1da1"),s=n("0e8f"),i=n("ef75"),u=n("ed08"),l=n("21a6"),p=n.n(l),f=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{width:"500px",title:"员工导入",visible:e.showExcelDialog},on:{close:function(t){return e.$emit("update:showExcelDialog",!1)}}},[t("el-row",{attrs:{type:"flex",justify:"center"}},[t("div",{staticClass:"upload-excel"},[t("input",{ref:"excel-upload-input",staticClass:"excel-upload-input",attrs:{type:"file",accept:".xlsx, .xls"},on:{change:e.uploadChange}}),t("div",{staticClass:"drop"},[t("i",{staticClass:"el-icon-upload"}),t("el-button",{attrs:{type:"text"},on:{click:e.getTemplate}},[e._v("下载导入模板")]),t("span",[e._v("将文件拖到此处或 "),t("el-button",{attrs:{type:"text"},on:{click:e.handleUpload}},[e._v("点击上传")])],1)],1)])]),t("el-row",{attrs:{type:"flex",justify:"end"}},[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.$emit("update:showExcelDialog",!1)}}},[e._v("取消")])],1)],1)},d=[],m={props:{showExcelDialog:{type:Boolean,default:!1}},methods:{getTemplate:function(){return Object(c["a"])(Object(o["a"])().mark((function e(){var t;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["f"])();case 2:t=e.sent,p.a.saveAs(t,"员工导入模版.xlsx");case 4:case"end":return e.stop()}}),e)})))()},handleUpload:function(){this.$refs["excel-upload-input"].click()},uploadChange:function(e){var t=this;return Object(c["a"])(Object(o["a"])().mark((function n(){var r,a;return Object(o["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log(e.target.files),r=e.target.files,!(r.length>0)){n.next=17;break}return a=new FormData,a.append("file",r[0]),n.prev=5,n.next=8,Object(i["h"])(a);case 8:t.$emit("uploadSuccess"),t.$emit("update:showExcelDialog",!1),n.next=14;break;case 12:n.prev=12,n.t0=n["catch"](5);case 14:return n.prev=14,t.$refs["excel-upload-input"].value="",n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[5,12,14,17]])})))()}}},b=m,h=(n("2fcb"),n("2877")),y=Object(h["a"])(b,f,d,!1,null,"d41a67ba",null),v=y.exports,g={name:"Employee",components:{ImportExcel:v},data:function(){return{depts:[],defaultProps:{label:"name",children:"children"},queryParams:{departmentId:null,page:1,pagesize:10,keyword:""},total:0,list:[],showExcelDialog:!1}},created:function(){this.getDepartment()},methods:{getDepartment:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=u["a"],t.next=3,Object(s["c"])();case 3:t.t1=t.sent,e.depts=(0,t.t0)(t.t1,0),e.queryParams.departmentId=e.depts[0].id,e.$nextTick((function(){e.$refs.deptTree.setCurrentKey(e.queryParams.departmentId)})),e.getEmployeeList();case 8:case"end":return t.stop()}}),t)})))()},selectNode:function(e){this.queryParams.departmentId=e.id,this.queryParams.page=1,this.getEmployeeList()},getEmployeeList:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var n,r,a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["e"])(e.queryParams);case 2:n=t.sent,r=n.rows,a=n.total,e.list=r,e.total=a;case 7:case"end":return t.stop()}}),t)})))()},changePage:function(e){this.queryParams.page=e,this.getEmployeeList()},changeValue:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){e.queryParams.page=1,e.getEmployeeList()}),300)},exportEmployee:function(){return Object(c["a"])(Object(o["a"])().mark((function e(){var t;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["c"])();case 2:t=e.sent,p.a.saveAs(t,"员工信息表.xlsx");case 4:case"end":return e.stop()}}),e)})))()},confirmDel:function(e){var t=this;return Object(c["a"])(Object(o["a"])().mark((function n(){return Object(o["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(i["b"])(e);case 2:1===t.list.length&&t.queryParams.page>1&&t.queryParams.page--,t.getEmployeeList(),t.$message.success("删除员工成功");case 5:case"end":return n.stop()}}),n)})))()}}},w=g,x=(n("c460"),Object(h["a"])(w,r,a,!1,null,"ede51168",null));t["default"]=x.exports},"9a0c":function(e,t,n){var r=n("342f");e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},"9af7":function(e,t,n){},c460:function(e,t,n){"use strict";n("9af7")},ed08:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("53ca"),n("14d9"),n("d3b7"),n("4d63"),n("c607"),n("ac1f"),n("2c3e"),n("00b4"),n("25f0"),n("4d90"),n("5319"),n("159b");function r(e,t){var n=[];return e.forEach((function(a){if(a.pid===t){n.push(a);var o=r(e,a.id);o.length&&(a.children=o)}})),n}},ef75:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"f",(function(){return c})),n.d(t,"h",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"g",(function(){return p}));var r=n("b775");function a(e){return Object(r["a"])({url:"/sys/user",params:e})}function o(){return Object(r["a"])({url:"/sys/user/export",responseType:"blob"})}function c(){return Object(r["a"])({url:"/sys/user/import/template",responseType:"blob"})}function s(e){return Object(r["a"])({url:"/sys/user/import",method:"post",data:e})}function i(e){return Object(r["a"])({method:"delete",url:"/sys/user/".concat(e)})}function u(e){return Object(r["a"])({url:"/sys/user",method:"post",data:e})}function l(e){return Object(r["a"])({url:"/sys/user/".concat(e)})}function p(e){return Object(r["a"])({url:"/sys/user/".concat(e.id),method:"put",data:e})}}}]);